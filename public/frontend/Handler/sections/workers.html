<style>
        :root {
            --primary-dark: #1B5E20;
            --primary-medium: #2E7D32;
            --primary-light: #A5D6A7;
            --primary-lighter: #81C784;
            --accent-yellow: #FFD600;
            --accent-orange: #FFB74D;
            --neutral-bg: #F8F9FA;
            --neutral-light: #FFFFFF;
            --neutral-medium: #E9ECEF;
            --text-dark: #212529;
            --text-medium: #495057;
            --text-light: #6C757D;
            --cane-50:#f7fee7; --cane-100:#ecfcca; --cane-200:#d8f999; --cane-300:#bbf451; --cane-400:#9ae600; --cane-500:#7ccf00; --cane-600:#5ea500; --cane-700:#497d00; --cane-800:#3c6300; --cane-900:#35530e; --cane-950:#192e03;
        }
        .section-card { background: var(--neutral-light); border: 1px solid var(--neutral-medium); }
        .filter-btn {
            background: #f1f5f9;
            color: #64748b;
            border: 1px solid #e2e8f0;
        }
        .filter-btn:hover {
            background: #e2e8f0;
            color: #475569;
        }
        .filter-btn.active {
            background: linear-gradient(135deg, var(--primary-medium), #6eb741);
            color: #fff;
            border-color: var(--primary-medium);
            box-shadow: 0 4px 12px rgba(76, 140, 0, 0.25);
        }
        .filter-dropdown-item {
            transition: background-color 0.2s ease, color 0.2s ease;
        }
        .filter-dropdown-item i.fa-check,
        .field-filter-item i.fa-check {
            opacity: 0;
            transition: opacity 0.15s ease;
        }
        .filter-dropdown-item.active,
        .field-filter-item.active {
            background: var(--cane-50);
            color: var(--primary-medium);
            font-weight: 600;
        }
        .filter-dropdown-item.active i.fa-check,
        .field-filter-item.active i.fa-check {
            opacity: 1;
        }
        .search-input {
            width: 100%;
            min-width: 12rem;
            padding: 0.65rem 0.85rem 0.65rem 2.75rem !important;
            border-radius: 0.75rem;
            border: 1px solid #d9e2ec;
            background: #ffffff;
            font-size: 0.85rem;
            color: var(--text-medium);
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
        }
        .search-input:focus {
            outline: none;
            border-color: #94d63b;
            box-shadow: 0 0 0 3px rgba(148, 214, 59, 0.25);
        }
        table thead th {
            background: #f8fafc;
            font-size: 0.75rem;
            letter-spacing: 0.05em;
            text-transform: uppercase;
            color: #6b7280;
        }
        table tbody tr {
            transition: background-color 0.18s ease, transform 0.18s ease;
        }
        table tbody tr:hover {
            background-color: #f3f4f6;
            transform: translateX(2px);
        }
        table tbody td {
            border-bottom: 1px solid #f1f5f9;
        }
        table tbody tr:last-child td {
            border-bottom: none;
        }
        .requests-card {
            background: #f4f9ec;
            border: 1px solid rgba(148, 214, 59, 0.35);
            box-shadow: 0 14px 24px rgba(118, 171, 36, 0.18);
        }
        .request-item {
            border: 1px solid rgba(148, 214, 59, 0.3);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .request-item:hover {
            transform: translateY(-1px);
            box-shadow: 0 14px 24px rgba(118, 171, 36, 0.15);
        }
        .request-btn {
            padding: 0.3rem 0.75rem;
            border-radius: 0.5rem;
            font-weight: 600;
            font-size: 0.75rem;
            transition: transform 0.2s ease;
        }
        .request-btn:hover {
            transform: translateY(-1px);
        }
        .request-btn-primary {
            background: var(--cane-600);
            color: #fff;
            border: 1px solid transparent;
            min-width: 4.75rem;
            padding: 0.3rem 0.75rem;
        }
        .request-btn-primary:hover {
            background: var(--cane-700);
        }
        .request-btn-secondary {
            background: #fff;
            color: #374151;
            border: 1px solid rgba(55, 65, 81, 0.2);
            min-width: 4.75rem;
            padding: 0.3rem 0.75rem;
        }
        .request-btn-secondary:hover {
            background: #f8fafc;
        }
        .summary-pill {
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
            padding: 0.35rem 0.75rem;
            border-radius: 999px;
            background: rgba(255, 255, 255, 0.75);
            color: var(--primary-medium);
            font-size: 0.75rem;
            font-weight: 600;
        }

        
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideUp {
  from { transform: translateY(20px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

.animate-fadeIn {
  animation: fadeIn 0.3s ease-out forwards;
}

.animate-slideUp {
  animation: slideUp 0.3s ease-out forwards;
}

#details-modal .modal-cols {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 12px;
}
@media (max-width: 900px) {
  #details-modal .modal-cols { grid-template-columns: repeat(2, 1fr); }
}
@media (max-width: 520px) {
  #details-modal .modal-cols { grid-template-columns: 1fr; }
}

    </style>
<div class="grid grid-cols-1 lg:grid-cols-[minmax(0,1.5fr)_minmax(0,1fr)] gap-6 mt-12">
        <!-- Left: All Workers List -->
        <div class="section-card rounded-2xl p-6 shadow-sm">
            <div class="mb-5">
                <h2 class="text-2xl font-bold text-[var(--cane-950)] mb-1 flex items-center gap-2">
                    <span class="inline-flex h-10 w-10 items-center justify-center rounded-full bg-[var(--cane-100)] text-[var(--cane-700)]">
                        <i class="fas fa-users"></i>
                    </span>
                    Team Members
                </h2>
                <p class="text-sm text-[var(--cane-700)]">Manage everyone working on your fields.</p>
            </div>

            <!-- Filter and Search Bar -->
            <div class="mb-4 flex flex-col sm:flex-row gap-3">
                <div class="flex-1">
                    <div class="relative">
                        <i class="fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-sm text-gray-400"></i>
                        <input id="searchWorkers" type="text" placeholder="Search workers..." class="search-input w-full" />
                    </div>
                </div>
                <div class="sm:w-52">
                    <div class="relative">
                        <button id="fieldFilterButton" type="button" class="w-full inline-flex items-center justify-between gap-2 rounded-lg border border-[#d9e2ec] bg-white px-3 py-2 text-sm font-semibold text-[var(--cane-800)] shadow-sm hover:bg-gray-50">
                            <span class="inline-flex items-center gap-2">
                                <i class="fas fa-map-marked-alt"></i>
                                <span id="fieldFilterLabel">All Fields</span>
                            </span>
                            <i class="fas fa-chevron-down text-xs"></i>
                        </button>
                        <div id="fieldFilterMenu" class="hidden absolute right-0 mt-2 w-full rounded-lg border border-[#d9e2ec] bg-white shadow-lg z-10 max-h-64 overflow-y-auto">
                            <!-- Field options will be populated dynamically -->
                        </div>
                    </div>
                </div>
                <div class="sm:w-52">
                    <div class="relative">
                        <button id="filterDropdownButton" type="button" class="w-full inline-flex items-center justify-between gap-2 rounded-lg border border-[#d9e2ec] bg-white px-3 py-2 text-sm font-semibold text-[var(--cane-800)] shadow-sm hover:bg-gray-50">
                            <span class="inline-flex items-center gap-2">
                                <i class="fas fa-filter"></i>
                                <span id="filterDropdownLabel">All Workers</span>
                            </span>
                            <i class="fas fa-chevron-down text-xs"></i>
                        </button>
                        <div id="filterDropdownMenu" class="hidden absolute right-0 mt-2 w-full rounded-lg border border-[#d9e2ec] bg-white shadow-lg z-10">
                            <button data-filter="all" class="filter-dropdown-item flex w-full items-center justify-between px-4 py-2 text-sm text-[var(--cane-800)] hover:bg-[var(--cane-50)]">
                                <span class="inline-flex items-center gap-2"><i class="fas fa-users"></i>All</span>
                                <i class="fas fa-check"></i>
                            </button>
                            <button data-filter="farmers" class="filter-dropdown-item flex w-full items-center justify-between px-4 py-2 text-sm text-[var(--cane-800)] hover:bg-[var(--cane-50)]">
                                <span class="inline-flex items-center gap-2"><i class="fas fa-user"></i>Workers Only</span>
                                <i class="fas fa-check"></i>
                            </button>
                            <button data-filter="drivers" class="filter-dropdown-item flex w-full items-center justify-between px-4 py-2 text-sm text-[var(--cane-800)] hover:bg-[var(--cane-50)]">
                                <span class="inline-flex items-center gap-2"><i class="fas fa-truck"></i>Drivers Only</span>
                                <i class="fas fa-check"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Workers Table -->
            <div class="overflow-hidden rounded-xl border border-[var(--cane-200)]">
                <table class="min-w-full text-sm">
                    <thead>
                        <tr>
                            <th class="py-3 pl-4 text-left">Name</th>
                            <th class="py-3 text-left">Field Assignments</th>
                            <th class="py-3 pr-4 text-right">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="workersTbody"></tbody>
                </table>
            </div>

            <!-- Empty State -->
            <div id="workersEmpty" class="hidden mt-4 rounded-xl border border-dashed border-[var(--cane-200)] bg-[var(--cane-50)] p-8 text-center">
                <div class="mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-white text-[var(--cane-500)] shadow-inner">
                    <i class="fas fa-users-slash text-2xl"></i>
                </div>
                <h3 class="mt-4 text-lg font-semibold text-[var(--cane-900)]">No workers found</h3>
                <p class="mt-2 text-sm text-[var(--cane-700)]">Start building your team by adding farmers and drivers.</p>
            </div>

            <!-- Stats Summary -->
            <div class="mt-4 flex gap-4 text-sm">
                <div class="flex items-center gap-2 text-[var(--cane-700)]">
                    <span class="inline-flex h-8 w-8 items-center justify-center rounded-full bg-[var(--cane-100)]">
                        <i class="fas fa-user text-xs"></i>
                    </span>
                    <span><span id="farmersCount" class="font-bold text-[var(--cane-900)]">0</span> Workers</span>
                </div>
                <div class="flex items-center gap-2 text-[var(--cane-700)]">
                    <span class="inline-flex h-8 w-8 items-center justify-center rounded-full bg-[#e0f2fe]">
                        <i class="fas fa-truck text-xs text-[#0f609b]"></i>
                    </span>
                    <span><span id="driversCount" class="font-bold text-[var(--cane-900)]">0</span> Drivers</span>
                </div>
            </div>
        </div>

        <!-- Right: Join Requests -->
        <div class="requests-card rounded-2xl p-6">
            <div class="mb-5">
                <div class="flex items-start justify-between mb-1">
                    <h2 class="text-2xl font-bold text-[var(--cane-950)] flex items-center gap-2">
                        <span class="inline-flex h-10 w-10 items-center justify-center rounded-full bg-white/70 text-[var(--cane-700)]">
                            <i class="fas fa-envelope-open-text"></i>
                        </span>
                        Join Requests
                    </h2>
                    <span id="requestsCount" class="summary-pill bg-white text-[var(--cane-800)]">
                        <i class="fas fa-inbox"></i><span>0 pending</span>
                    </span>
                </div>
                <p class="text-sm text-[var(--cane-700)]">Review pending invitations from farmers and drivers.</p>
            </div>
            
            <div id="requestsList" class="space-y-3"></div>
        </div>
    </div>

    <template id="requestItemTpl">
        <div class="request-item flex flex-col gap-3 rounded-2xl bg-white/90 p-4 sm:flex-row sm:items-center sm:justify-between">
            <div class="space-y-1">
                <p class="text-base font-semibold text-[var(--cane-950)] flex items-center gap-2">
                    <span data-field="name"></span>
                    <span class="summary-pill bg-[var(--cane-100)] text-[var(--cane-800)]" data-field="role"></span>
                </p>
                <p class="text-sm text-[var(--cane-700)] flex items-center gap-2">
                    <i class="fas fa-map-marker-alt text-[var(--cane-500)]"></i>
                    <span data-field="barangay"></span>
                    <span class="mx-1">â€¢</span>
                    <i class="fas fa-phone text-[var(--cane-500)]"></i>
                    <span data-field="phone"></span>
                </p>
            </div>
            <div class="flex items-center gap-3">
                <button class="request-btn bg-green-600 px-4 py-2 text-white hover:bg-green-700" data-action="approve">
                    <i class="fas fa-check mr-1"></i><span>Approve</span>
                </button>
                <button class="request-btn bg-red-600 px-4 py-2 text-white hover:bg-red-700" data-action="reject">
                    <i class="fas fa-times mr-1"></i><span>Reject</span>
                </button>
            </div>
        </div>
    </template>

<script type="module" src="../../backend/Handler/worker.js"></script>
